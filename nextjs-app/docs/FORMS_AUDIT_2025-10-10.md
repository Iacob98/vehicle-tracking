# –ê—É–¥–∏—Ç —Ñ–æ—Ä–º vs –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö - –ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç

**–î–∞—Ç–∞:** 10 –æ–∫—Ç—è–±—Ä—è 2025
**–û–±—ä—ë–º:** –í—Å–µ —Ñ–æ—Ä–º—ã, —Å—Ö–µ–º—ã –∏ API routes –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –ø—Ä–æ—Ç–∏–≤ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î
**–¶–µ–ª—å:** –ù–∞–π—Ç–∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫–∏

---

## üìä –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞

**–í—Å–µ–≥–æ —Ñ–æ—Ä–º –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ:** 6
**–§–æ—Ä–º —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏:** 3 (50%)
**–§–æ—Ä–º –±–µ–∑ –ø—Ä–æ–±–ª–µ–º:** 3 (50%)

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞–π–¥–µ–Ω—ã:

1. **users** - API –ù–ï –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª–µ `role` –≤ –ë–î (–ö–†–ò–¢–ò–ß–ù–û!)
2. **car_expenses** - –ü–æ–ª–µ `mileage` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î
3. **teams** - –ü–æ–ª–µ `description` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î
4. **users** - –ü–æ–ª–µ `position` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î

---

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Ö–æ–¥–∫–∏

### 1. VEHICLES ‚úÖ –ö–û–†–†–ï–ö–¢–ù–û

**–ü–æ–ª—è –≤ –ë–î:**
```
id, organization_id, name, license_plate, vin, status, created_at
is_rental, rental_start_date, rental_end_date, rental_monthly_price
model, year, photo_url
```

**–ü–æ–ª—è –≤ Zod schema:**
```
name, license_plate, vin, model, year, status, photo_url
is_rental, rental_start_date, rental_end_date, rental_monthly_price
```

**–ü–æ–ª—è –≤ —Ñ–æ—Ä–º–µ:**
```
name, license_plate, vin, model, year, status, photos (file upload)
is_rental, rental_start_date, rental_end_date, rental_monthly_price
```

**–ü–æ–ª—è –≤ API:**
```
name, license_plate, vin, model, year, status, photo_url
is_rental, rental_start_date, rental_end_date, rental_monthly_price
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ü–û–õ–Ø –°–û–í–ü–ê–î–ê–Æ–¢** - –ü—Ä–æ–±–ª–µ–º –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

**–§–∞–π–ª—ã:**
- `lib/schemas/vehicles.schema.ts`
- `app/dashboard/vehicles/VehicleForm.tsx`
- `app/api/vehicles/route.ts`

---

### 2. PENALTIES ‚úÖ –ö–û–†–†–ï–ö–¢–ù–û

**–ü–æ–ª—è –≤ –ë–î:**
```
id, organization_id, vehicle_id, user_id, date, amount
photo_url, status, description
```

**–ü–æ–ª—è –≤ Zod schema:**
```
vehicle_id, user_id, date, amount, description, photo_url, status
```

**–ü–æ–ª—è –≤ —Ñ–æ—Ä–º–µ:**
```
vehicle_id, user_id, date, amount, description, photo (file upload), status
```

**–ü–æ–ª—è –≤ API:**
```
vehicle_id, user_id, amount, date, description, photo_url, status
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ü–û–õ–Ø –°–û–í–ü–ê–î–ê–Æ–¢** - –ü—Ä–æ–±–ª–µ–º –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

**–§–∞–π–ª—ã:**
- `lib/schemas/penalties.schema.ts`
- `app/dashboard/penalties/new/PenaltyForm.tsx`
- `app/api/penalties/route.ts`

---

### 3. EXPENSES ‚úÖ –ö–û–†–†–ï–ö–¢–ù–û

**–ü–æ–ª—è –≤ –ë–î:**
```
id, organization_id, type, vehicle_id, team_id, date
amount, description, receipt_url
```

**–ü–æ–ª—è –≤ Zod schema:**
```
type, vehicle_id, team_id, date, amount, description
```

**–ü–æ–ª—è –≤ —Ñ–æ—Ä–º–µ:**
```
type, vehicle_id, team_id, date, amount, description
```

**–ü–æ–ª—è –≤ API:**
```
type, vehicle_id, team_id, amount, date, description
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ü–û–õ–Ø –°–û–í–ü–ê–î–ê–Æ–¢** - –ü—Ä–æ–±–ª–µ–º –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Schema –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç `receipt_url`, –∫–æ—Ç–æ—Ä–æ–µ –µ—Å—Ç—å –≤ –ë–î, –Ω–æ —Ñ–æ—Ä–º–∞ –µ–≥–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç, —Ç–∞–∫ —á—Ç–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ—Ç.

**–§–∞–π–ª—ã:**
- `lib/schemas/expenses.schema.ts`
- `app/dashboard/expenses/new/ExpenseForm.tsx`
- `app/api/expenses/route.ts`

---

### 4. CAR_EXPENSES ‚ùå –ï–°–¢–¨ –ù–ï–°–û–û–¢–í–ï–¢–°–¢–í–ò–Ø

**–ü–æ–ª—è –≤ –ë–î:**
```
id, organization_id, vehicle_id, date, category, amount
description, receipt_url, maintenance_id, created_at
```

**–ü–æ–ª—è –≤ Zod schema:**
```
vehicle_id, maintenance_id, date, amount, category, description
receipt_url, mileage ‚ö†Ô∏è
```

**–ü–æ–ª—è –≤ —Ñ–æ—Ä–º–µ:**
```
vehicle_id, category, date, amount, mileage ‚ö†Ô∏è, description
```

**–ü–æ–ª—è –≤ API:**
```
vehicle_id, category, amount, date, description, mileage ‚ö†Ô∏è
maintenance_id, receipt_url
```

#### ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ü–æ–ª–µ `mileage`

- **Schema:** –ò–º–µ–µ—Ç –ø–æ–ª–µ `mileage` (number, optional)
- **–§–æ—Ä–º–∞:** –ò–º–µ–µ—Ç input –ø–æ–ª–µ –¥–ª—è mileage
- **API:** –ü—ã—Ç–∞–µ—Ç—Å—è –≤—Å—Ç–∞–≤–∏—Ç—å `mileage` –≤ –ë–î
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** **–ù–ï–¢ –ö–û–õ–û–ù–ö–ò `mileage`**

**–í–ª–∏—è–Ω–∏–µ:** üü† –í–´–°–û–ö–û–ï - –ë—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ë–î –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–≤–æ–¥—è—Ç –ø—Ä–æ–±–µ–≥

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:**
1. –õ–∏–±–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É `mileage` –≤ —Ç–∞–±–ª–∏—Ü—É `car_expenses`
2. –õ–∏–±–æ —É–¥–∞–ª–∏—Ç—å `mileage` –∏–∑ schema, —Ñ–æ—Ä–º—ã –∏ API route

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–¥–∞–ª–∏—Ç—å `mileage` –∏–∑ –∫–æ–¥–∞, —Ç–∞–∫ –∫–∞–∫ –µ–≥–æ –Ω–µ—Ç –≤ –¥–∏–∑–∞–π–Ω–µ –ë–î

**–§–∞–π–ª—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- `lib/schemas/car-expenses.schema.ts` - —É–¥–∞–ª–∏—Ç—å mileage –∏–∑ schema
- `app/dashboard/car-expenses/new/CarExpenseForm.tsx` - —É–¥–∞–ª–∏—Ç—å input –ø–æ–ª–µ mileage
- `app/api/car-expenses/route.ts` - —É–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É mileage

---

### 5. TEAMS ‚ùå –ï–°–¢–¨ –ù–ï–°–û–û–¢–í–ï–¢–°–¢–í–ò–Ø

**–ü–æ–ª—è –≤ –ë–î:**
```
id, organization_id, name, lead_id, created_at
```

**–ü–æ–ª—è –≤ Zod schema:**
```
name, description ‚ö†Ô∏è
```

**–ü–æ–ª—è –≤ —Ñ–æ—Ä–º–µ:**
```
name, description ‚ö†Ô∏è
```

**–ü–æ–ª—è –≤ API:**
```
name, description ‚ö†Ô∏è
```

#### ‚ùå –ü–†–û–ë–õ–ï–ú–ê 1: –ü–æ–ª–µ `description`

- **Schema:** –ò–º–µ–µ—Ç –ø–æ–ª–µ `description` (string, optional)
- **–§–æ—Ä–º–∞:** –ò–º–µ–µ—Ç textarea –ø–æ–ª–µ –¥–ª—è description
- **API:** –ü—ã—Ç–∞–µ—Ç—Å—è –≤—Å—Ç–∞–≤–∏—Ç—å `description` –≤ –ë–î
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** **–ù–ï–¢ –ö–û–õ–û–ù–ö–ò `description`**

**–í–ª–∏—è–Ω–∏–µ:** üü† –í–´–°–û–ö–û–ï - –ë—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ë–î –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–±–∞–≤–ª—è—é—Ç –æ–ø–∏—Å–∞–Ω–∏–µ

#### ‚ùå –ü–†–û–ë–õ–ï–ú–ê 2: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª–µ `lead_id`

- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –ò–º–µ–µ—Ç –∫–æ–ª–æ–Ω–∫—É `lead_id` (FK –∫ —Ç–∞–±–ª–∏—Ü–µ users)
- **Schema:** –ù–ï–¢ –ø–æ–ª—è `lead_id`
- **–§–æ—Ä–º–∞:** –ù–ï–¢ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è
- **API:** –ù–ï –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `lead_id`

**–í–ª–∏—è–Ω–∏–µ:** üü° –°–†–ï–î–ù–ï–ï - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è –∫–æ–º–∞–Ω–¥—ã –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:**
1. –£–¥–∞–ª–∏—Ç—å `description` –∏–∑ schema, —Ñ–æ—Ä–º—ã –∏ API
2. –î–æ–±–∞–≤–∏—Ç—å `lead_id` –ø–æ–ª–µ –≤ schema, —Ñ–æ—Ä–º—É –∏ API –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è –∫–æ–º–∞–Ω–¥—ã

**–§–∞–π–ª—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- `lib/schemas/teams.schema.ts` - —É–¥–∞–ª–∏—Ç—å description, –¥–æ–±–∞–≤–∏—Ç—å lead_id
- `app/dashboard/teams/new/TeamForm.tsx` - —É–¥–∞–ª–∏—Ç—å description field, –¥–æ–±–∞–≤–∏—Ç—å lead selector
- `app/api/teams/route.ts` - —É–¥–∞–ª–∏—Ç—å description, –¥–æ–±–∞–≤–∏—Ç—å lead_id

---

### 6. USERS ‚ùå –ï–°–¢–¨ –ö–†–ò–¢–ò–ß–ù–´–ï –ù–ï–°–û–û–¢–í–ï–¢–°–¢–í–ò–Ø

**–ü–æ–ª—è –≤ –ë–î:**
```
id, organization_id, email, password_hash, first_name, last_name
phone, team_id, created_at, role
```

**–ü–æ–ª—è –≤ Zod schema:**
```
email, first_name, last_name, phone
position ‚ö†Ô∏è, photo_url ‚ö†Ô∏è
role (–≤ createUserSchema), password + confirmPassword (–¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è)
```

**–ü–æ–ª—è –≤ —Ñ–æ—Ä–º–µ:**
```
email, password, confirmPassword, role, first_name, last_name
phone, position ‚ö†Ô∏è
```

**–ü–æ–ª—è –≤ API:**
```
email, password (—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π), first_name, last_name, phone
position ‚ö†Ô∏è
‚ö†Ô∏è –ù–ï–¢ –ü–û–õ–Ø role!
```

#### üî¥ –ö–†–ò–¢–ò–ß–ù–û: –ü–æ–ª–µ `role` –ù–ï –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –ë–î!

- **Schema:** –ò–º–µ–µ—Ç –ø–æ–ª–µ `role` –≤ createUserSchema
- **–§–æ—Ä–º–∞:** –ò–º–µ–µ—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–æ–ª–∏
- **API:** **–ù–ï –í–°–¢–ê–í–õ–Ø–ï–¢ `role` –í –ë–ê–ó–£ –î–ê–ù–ù–´–•!**
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –ò–º–µ–µ—Ç –∫–æ–ª–æ–Ω–∫—É `role`

**–í–ª–∏—è–Ω–∏–µ:** üî¥ **–ö–†–ò–¢–ò–ß–ù–û** - –í—Å–µ –Ω–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –ë–ï–ó —Ä–æ–ª–µ–π! –≠—Ç–æ –≤—ã–∑–æ–≤–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π!

#### ‚ùå –ü–†–û–ë–õ–ï–ú–ê 2: –ü–æ–ª–µ `position`

- **Schema:** –ò–º–µ–µ—Ç –ø–æ–ª–µ `position` (string, optional)
- **–§–æ—Ä–º–∞:** –ò–º–µ–µ—Ç input –ø–æ–ª–µ –¥–ª—è –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
- **API:** –ü—ã—Ç–∞–µ—Ç—Å—è –≤—Å—Ç–∞–≤–∏—Ç—å `position` –≤ –ë–î
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** **–ù–ï–¢ –ö–û–õ–û–ù–ö–ò `position`**

**–í–ª–∏—è–Ω–∏–µ:** üü† –í–´–°–û–ö–û–ï - –ë—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ë–î –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–≤–æ–¥—è—Ç –¥–æ–ª–∂–Ω–æ—Å—Ç—å

#### ‚ùå –ü–†–û–ë–õ–ï–ú–ê 3: –ü–æ–ª–µ `photo_url` –≤ schema

- **Schema:** –ò–º–µ–µ—Ç –ø–æ–ª–µ `photo_url` (string, optional)
- **–§–æ—Ä–º–∞:** –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç (—Ö–æ—Ä–æ—à–æ!)
- **API:** –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç (—Ö–æ—Ä–æ—à–æ!)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** **–ù–ï–¢ –ö–û–õ–û–ù–ö–ò `photo_url`**

**–í–ª–∏—è–Ω–∏–µ:** üü¢ –ù–ò–ó–ö–û–ï - Schema –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —Ç–∞–∫ —á—Ç–æ runtime –æ—à–∏–±–∫–∏ –Ω–µ—Ç. –ü—Ä–æ—Å—Ç–æ –ª–∏—à–Ω–µ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ.

#### ‚ùå –ü–†–û–ë–õ–ï–ú–ê 4: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª–µ `team_id`

- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –ò–º–µ–µ—Ç –∫–æ–ª–æ–Ω–∫—É `team_id` (FK –∫ —Ç–∞–±–ª–∏—Ü–µ teams)
- **Schema:** –ù–ï–¢ –ø–æ–ª—è `team_id`
- **–§–æ—Ä–º–∞:** –ù–ï–¢ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–æ–º–∞–Ω–¥—ã
- **API:** –ù–ï –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `team_id`

**–í–ª–∏—è–Ω–∏–µ:** üü° –°–†–ï–î–ù–ï–ï - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω—ã –≤ –∫–æ–º–∞–Ω–¥—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:**
1. **üî¥ –ö–†–ò–¢–ò–ß–ù–û:** –î–æ–±–∞–≤–∏—Ç—å –≤—Å—Ç–∞–≤–∫—É `role` –≤ API route
2. –£–¥–∞–ª–∏—Ç—å `position` –∏–∑ schema, —Ñ–æ—Ä–º—ã –∏ API
3. –£–¥–∞–ª–∏—Ç—å `photo_url` –∏–∑ schema (–∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É –≤ –ë–î –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
4. –î–æ–±–∞–≤–∏—Ç—å `team_id` –ø–æ–ª–µ –≤ schema, —Ñ–æ—Ä–º—É –∏ API –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–º–∞–Ω–¥—É

**–§–∞–π–ª—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- `lib/schemas/users.schema.ts` - —É–¥–∞–ª–∏—Ç—å position, photo_url; –æ—Å—Ç–∞–≤–∏—Ç—å role
- `app/dashboard/users/new/UserForm.tsx` - —É–¥–∞–ª–∏—Ç—å position field, –¥–æ–±–∞–≤–∏—Ç—å team selector
- **`app/api/users/route.ts` (–ö–†–ò–¢–ò–ß–ù–û!)** - –¥–æ–±–∞–≤–∏—Ç—å role –≤ insert, —É–¥–∞–ª–∏—Ç—å position, –¥–æ–±–∞–≤–∏—Ç—å team_id

---

## üìã –°–≤–æ–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º –ø–æ —Å—Ç–µ–ø–µ–Ω–∏ –≤–∞–∂–Ω–æ—Å—Ç–∏

### üî¥ –ö–†–ò–¢–ò–ß–ù–û (–ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

1. **users API route** - –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤—Å—Ç–∞–≤–∫–∞ –ø–æ–ª—è `role` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –±–µ–∑ —Ä–æ–ª–µ–π!
   - **–§–∞–π–ª:** `app/api/users/route.ts`
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å `role: body.role` –≤ –æ–±—ä–µ–∫—Ç –≤—Å—Ç–∞–≤–∫–∏

### üü† –í–´–°–û–ö–û–ï (–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∫–æ—Ä–æ - –í—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫–∏)

1. **car_expenses** - –ü–æ–ª–µ `mileage` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î
   - **–§–∞–π–ª—ã:**
     - `lib/schemas/car-expenses.schema.ts`
     - `app/dashboard/car-expenses/new/CarExpenseForm.tsx`
     - `app/api/car-expenses/route.ts`
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è mileage

2. **teams** - –ü–æ–ª–µ `description` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î
   - **–§–∞–π–ª—ã:**
     - `lib/schemas/teams.schema.ts`
     - `app/dashboard/teams/new/TeamForm.tsx`
     - `app/api/teams/route.ts`
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è description

3. **users** - –ü–æ–ª–µ `position` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î
   - **–§–∞–π–ª—ã:**
     - `lib/schemas/users.schema.ts`
     - `app/dashboard/users/new/UserForm.tsx`
     - `app/api/users/route.ts`
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è position

### üü° –°–†–ï–î–ù–ï–ï (–§—É–Ω–∫—Ü–∏—è –Ω–µ–ø–æ–ª–Ω–∞—è)

1. **teams** - –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª–µ `lead_id` - –Ω–µ–ª—å–∑—è –Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è –∫–æ–º–∞–Ω–¥—ã
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å lead_id selector –≤ —Ñ–æ—Ä–º—É –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ API

2. **users** - –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª–µ `team_id` - –Ω–µ–ª—å–∑—è –Ω–∞–∑–Ω–∞—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∫–æ–º–∞–Ω–¥—É
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å team selector –≤ —Ñ–æ—Ä–º—É –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ API

### üü¢ –ù–ò–ó–ö–û–ï (Cleanup)

1. **users schema** - `photo_url` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –£–¥–∞–ª–∏—Ç—å –∏–∑ schema

2. **expenses schema** - `receipt_url` –µ—Å—Ç—å –≤ –ë–î –Ω–æ –Ω–µ –≤ schema (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–æ—Ä–º–æ–π, —Ç–∞–∫ —á—Ç–æ –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã)
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ schema –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö–†–ò–¢–ò–ß–ù–û - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –°–ï–ô–ß–ê–°):
```bash
1. app/api/users/route.ts - –î–æ–±–∞–≤–∏—Ç—å –≤—Å—Ç–∞–≤–∫—É role –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–´–°–û–ö–û–ï - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ):
```bash
1. car_expenses - –£–¥–∞–ª–∏—Ç—å –ø–æ–ª–µ mileage –∏–∑ schema, —Ñ–æ—Ä–º—ã, API
2. teams - –£–¥–∞–ª–∏—Ç—å –ø–æ–ª–µ description –∏–∑ schema, —Ñ–æ—Ä–º—ã, API
3. users - –£–¥–∞–ª–∏—Ç—å –ø–æ–ª–µ position –∏–∑ schema, —Ñ–æ—Ä–º—ã, API
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–°–†–ï–î–ù–ï–ï - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ):
```bash
1. teams - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ lead_id –≤ schema, —Ñ–æ—Ä–º—É, API
2. users - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ team_id –≤ schema, —Ñ–æ—Ä–º—É, API
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4 (–ù–ò–ó–ö–û–ï - Cleanup):
```bash
1. users schema - –£–¥–∞–ª–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ photo_url
2. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ receipt_url –≤ expenses schema –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –≤ –±—É–¥—É—â–µ–º
```

---

## üìÅ –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –î–ª—è car_expenses (—É–¥–∞–ª–∏—Ç—å mileage):
```
lib/schemas/car-expenses.schema.ts
app/dashboard/car-expenses/new/CarExpenseForm.tsx
app/api/car-expenses/route.ts
```

### –î–ª—è teams (—É–¥–∞–ª–∏—Ç—å description, –¥–æ–±–∞–≤–∏—Ç—å lead_id):
```
lib/schemas/teams.schema.ts
app/dashboard/teams/new/TeamForm.tsx
app/api/teams/route.ts
```

### –î–ª—è users (—É–¥–∞–ª–∏—Ç—å position, –¥–æ–±–∞–≤–∏—Ç—å role –≤ API, –¥–æ–±–∞–≤–∏—Ç—å team_id):
```
lib/schemas/users.schema.ts
app/dashboard/users/new/UserForm.tsx
app/api/users/route.ts (–ö–†–ò–¢–ò–ß–ù–û)
```

---

## üí° –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ò–∑ 6 –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Ñ–æ—Ä–º:
- ‚úÖ 3 —Ñ–æ—Ä–º—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã (vehicles, penalties, expenses)
- ‚ùå 3 —Ñ–æ—Ä–º—ã –∏–º–µ—é—Ç –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è (car_expenses, teams, users)

**–°–∞–º–∞—è –∫—Ä–∏—Ç–∏—á–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞** –≤ **API route –¥–ª—è users**, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –≤—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–µ `role`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ –≤—Å–µ –≤–Ω–æ–≤—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç –∏–º–µ—Ç—å NULL —Ä–æ–ª–∏ –∏ —Å—Ç–æ–ª–∫–Ω—É—Ç—Å—è —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

–î—Ä—É–≥–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–∞—Å–∞—é—Ç—Å—è –ø–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –Ω–æ –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ö, —á—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –æ—à–∏–±–∫–∞–º –≤—Å—Ç–∞–≤–∫–∏ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ø—ã—Ç–∞—é—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –ø–æ–ª—è.

---

## üîß –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ù–ï–ú–ï–î–õ–ï–ù–ù–û:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å users API - –¥–æ–±–∞–≤–∏—Ç—å role
2. **–≠—Ç–∞ –Ω–µ–¥–µ–ª—è:** –£–¥–∞–ª–∏—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è (mileage, description, position)
3. **–ö–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ:** –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è (lead_id, team_id)
4. **Cleanup:** –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è schema

---

**–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω:** 2025-10-10
**–ê–≤—Ç–æ—Ä:** Claude Code
**–ò—Å—Ç–æ—á–Ω–∏–∫:** Automated form audit against database schema
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê—É–¥–∏—Ç –∑–∞–≤–µ—Ä—à–µ–Ω, –ø—Ä–æ–±–ª–µ–º—ã –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã
