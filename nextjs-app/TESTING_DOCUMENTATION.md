# üß™ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é Fleet Manager

**–î–∞—Ç–∞:** 2025-10-05
**–í–µ—Ä—Å–∏—è:** 1.0.0

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](#–æ–±–∑–æ—Ä-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
2. [–¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤](#—Ç–∏–ø—ã-—Ç–µ—Å—Ç–æ–≤)
3. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
4. [–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤](#–∑–∞–ø—É—Å–∫-—Ç–µ—Å—Ç–æ–≤)
5. [–ü–æ–∫—Ä—ã—Ç–∏–µ –ø–æ –º–æ–¥—É–ª—è–º](#–ø–æ–∫—Ä—ã—Ç–∏–µ-–ø–æ-–º–æ–¥—É–ª—è–º)
6. [–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏](#–ª—É—á—à–∏–µ-–ø—Ä–∞–∫—Ç–∏–∫–∏)

---

## üéØ –û–±–∑–æ—Ä —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

- **Unit —Ç–µ—Å—Ç—ã** - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π
- **Integration —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API routes –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥—É–ª–µ–π
- **E2E —Ç–µ—Å—Ç—ã** - —Å–∫–≤–æ–∑–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- **Server Actions —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –ª–æ–≥–∏–∫–∏ Next.js

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è

- **–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:** ~70%
- **Unit —Ç–µ—Å—Ç—ã:** 10 —Ñ–∞–π–ª–æ–≤
- **Integration —Ç–µ—Å—Ç—ã:** 2 API routes
- **E2E —Ç–µ—Å—Ç—ã:** 3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–ª–æ—É
- **Server Actions:** 2 –º–æ–¥—É–ª—è

---

## üî¨ –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

### 1. Unit —Ç–µ—Å—Ç—ã (Jest + React Testing Library)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `__tests__/components/`, `__tests__/lib/`

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º:**
- React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Sidebar, Header)
- –£—Ç–∏–ª–∏—Ç—ã –∏ —Ö–µ–ª–ø–µ—Ä—ã
- Supabase –∫–ª–∏–µ–Ω—Ç—ã

**–ü—Ä–∏–º–µ—Ä:**
```typescript
// __tests__/components/Sidebar.test.tsx
import { render, screen } from '@testing-library/react';
import Sidebar from '@/components/Sidebar';

describe('Sidebar Component', () => {
  it('renders all menu items', () => {
    render(<Sidebar user={mockUser} />);
    expect(screen.getByText('Dashboard')).toBeInTheDocument();
  });
});
```

### 2. Integration —Ç–µ—Å—Ç—ã (Jest)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `__tests__/api/`

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º:**
- API routes (`/api/vehicles`, `/api/vehicle-documents`)
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**–ü—Ä–∏–º–µ—Ä:**
```typescript
// __tests__/api/vehicle-documents.test.ts
describe('Vehicle Documents API', () => {
  it('uploads document successfully', async () => {
    const response = await POST(request);
    expect(response.status).toBe(200);
  });
});
```

### 3. E2E —Ç–µ—Å—Ç—ã (Playwright)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `e2e/`

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º:**
- –ü–æ–ª–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–≤—Ö–æ–¥/–≤—ã—Ö–æ–¥)
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, —á—Ç–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏

**–ü—Ä–∏–º–µ—Ä:**
```typescript
// e2e/vehicles.spec.ts
test('should create new vehicle', async ({ page }) => {
  await page.goto('/dashboard/vehicles/new');
  await page.fill('input[name="name"]', 'Test Vehicle');
  await page.click('button[type="submit"]');
  await expect(page).toHaveURL('/dashboard/vehicles');
});
```

### 4. Server Actions —Ç–µ—Å—Ç—ã

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `__tests__/server-actions/`

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º:**
- Server Actions –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- RLS (Row Level Security) –ø—Ä–æ–≤–µ—Ä–∫–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# Jest –∏ React Testing Library
npm install -D @testing-library/react @testing-library/jest-dom @testing-library/user-event jest jest-environment-jsdom @types/jest

# Playwright –¥–ª—è E2E
npm install -D @playwright/test
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Jest

**–§–∞–π–ª:** `jest.config.js`

```javascript
const nextJest = require('next/jest')

const createJestConfig = nextJest({
  dir: './',
})

const customJestConfig = {
  setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],
  testEnvironment: 'jest-environment-jsdom',
  moduleNameMapper: {
    '^@/(.*)$': '<rootDir>/$1',
  },
}

module.exports = createJestConfig(customJestConfig)
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Playwright

**–§–∞–π–ª:** `playwright.config.ts`

```typescript
import { defineConfig } from '@playwright/test';

export default defineConfig({
  testDir: './e2e',
  webServer: {
    command: 'npm run dev',
    url: 'http://localhost:3000',
  },
});
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤

**–§–∞–π–ª:** `.env.test`

```bash
# Test user credentials
TEST_USER_EMAIL=test@example.com
TEST_USER_PASSWORD=testpassword123

# Supabase
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
```

---

## üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### Unit –∏ Integration —Ç–µ—Å—Ç—ã

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
npm test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ watch —Ä–µ–∂–∏–º–µ
npm test -- --watch

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
npm test -- --coverage

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
npm test Sidebar.test.tsx
```

### E2E —Ç–µ—Å—Ç—ã

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ E2E —Ç–µ—Å—Ç—ã
npx playwright test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ UI —Ä–µ–∂–∏–º–µ
npx playwright test --ui

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
npx playwright test e2e/auth.spec.ts

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –æ—Ç–ª–∞–¥–∫–æ–π
npx playwright test --debug
```

### –°–∫—Ä–∏–ø—Ç—ã –≤ package.json

```json
{
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "test:e2e": "playwright test",
    "test:e2e:ui": "playwright test --ui",
    "test:all": "npm test && npm run test:e2e"
  }
}
```

---

## üì¶ –ü–æ–∫—Ä—ã—Ç–∏–µ –ø–æ –º–æ–¥—É–ª—è–º

### ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏

#### 1. üöó –ê–≤—Ç–æ–º–æ–±–∏–ª–∏ (Vehicles)
- **Unit —Ç–µ—Å—Ç—ã:** ‚ùå –ù–µ –ø–æ–∫—Ä—ã—Ç–æ (Server Component)
- **Integration —Ç–µ—Å—Ç—ã:** ‚úÖ DELETE `/api/vehicles/[id]`
- **E2E —Ç–µ—Å—Ç—ã:** ‚úÖ –ü–æ–ª–Ω—ã–π CRUD —Ü–∏–∫–ª
- **Server Actions:** ‚úÖ Create, Update, Delete

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
- –£–¥–∞–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π

#### 2. üöß –®—Ç—Ä–∞—Ñ—ã (Penalties)
- **Unit —Ç–µ—Å—Ç—ã:** ‚ùå –ù–µ –ø–æ–∫—Ä—ã—Ç–æ (Server Component)
- **Integration —Ç–µ—Å—Ç—ã:** ‚ùå –ù–µ –ø–æ–∫—Ä—ã—Ç–æ
- **E2E —Ç–µ—Å—Ç—ã:** ‚úÖ CRUD + —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- **Server Actions:** ‚úÖ Create, Update

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
- –°–æ–∑–¥–∞–Ω–∏–µ —à—Ç—Ä–∞—Ñ–∞ (–±–µ–∑ team_id)
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ (open ‚Üí paid)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É
- –ü—Ä–æ–≤–µ—Ä–∫–∞ RLS –ø–æ organization_id

#### 3. üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã (Documents)
- **Unit —Ç–µ—Å—Ç—ã:** ‚ùå –ù–µ –ø–æ–∫—Ä—ã—Ç–æ
- **Integration —Ç–µ—Å—Ç—ã:** ‚úÖ POST `/api/vehicle-documents`
- **E2E —Ç–µ—Å—Ç—ã:** ‚ùå –ù–µ –ø–æ–∫—Ä—ã—Ç–æ
- **Server Actions:** ‚ùå –ù–µ –ø–æ–∫—Ä—ã—Ç–æ

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è organization_id

#### 4. üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Auth)
- **Unit —Ç–µ—Å—Ç—ã:** ‚ùå –ù–µ –ø–æ–∫—Ä—ã—Ç–æ
- **Integration —Ç–µ—Å—Ç—ã:** ‚ùå –ù–µ –ø–æ–∫—Ä—ã—Ç–æ
- **E2E —Ç–µ—Å—Ç—ã:** ‚úÖ –ü–æ–ª–Ω—ã–π —Ñ–ª–æ—É
- **Server Actions:** ‚ùå –ù–µ –ø–æ–∫—Ä—ã—Ç–æ

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
- –í—Ö–æ–¥ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –û—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ dashboard

#### 5. üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Components)
- **Sidebar:** ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- **Header:** ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- **–î—Ä—É–≥–∏–µ:** ‚ùå –ù–µ –ø–æ–∫—Ä—ã—Ç–æ

### ‚ö†Ô∏è –ù–µ–ø–æ–∫—Ä—ã—Ç—ã–µ –º–æ–¥—É–ª–∏

1. **üë• –ë—Ä–∏–≥–∞–¥—ã (Teams)** - —Ç—Ä–µ–±—É—é—Ç—Å—è E2E —Ç–µ—Å—Ç—ã
2. **üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (Users)** - —Ç—Ä–µ–±—É—é—Ç—Å—è E2E —Ç–µ—Å—Ç—ã
3. **üîß –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ (Maintenance)** - –≤—Å–µ —Ç–∏–ø—ã —Ç–µ—Å—Ç–æ–≤
4. **üí∞ –†–∞—Å—Ö–æ–¥—ã (Expenses)** - –≤—Å–µ —Ç–∏–ø—ã —Ç–µ—Å—Ç–æ–≤
5. **üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (Analytics)** - –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

---

## üéØ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

#### ‚úÖ DO:
```typescript
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è
test('should create vehicle with valid data', async () => {
  // ...
});

// –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
describe('Vehicle CRUD', () => {
  test('creates vehicle', () => {});
  test('updates vehicle', () => {});
  test('deletes vehicle', () => {});
});

// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–∫–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
jest.mock('@/lib/supabase/server');
```

#### ‚ùå DON'T:
```typescript
// –ò–∑–±–µ–≥–∞–π—Ç–µ –Ω–µ—è—Å–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π
test('test1', () => {});

// –ù–µ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ implementation details
expect(component.state.count).toBe(5);

// –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—É—é –ë–î –≤ unit —Ç–µ—Å—Ç–∞—Ö
await supabase.from('vehicles').insert({});
```

### 2. E2E —Ç–µ—Å—Ç—ã

#### ‚úÖ DO:
```typescript
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ page object pattern
class VehiclePage {
  async createVehicle(name: string) {
    await this.page.fill('[name="name"]', name);
    await this.page.click('button[type="submit"]');
  }
}

// –û—á–∏—â–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
test.afterEach(async () => {
  await cleanupTestData();
});
```

#### ‚ùå DON'T:
```typescript
// –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã
await page.waitForTimeout(5000);

// –ù–µ –∑–∞–≤–∏—Å—å—Ç–µ –æ—Ç –ø–æ—Ä—è–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤
test.serial('test that depends on previous', () => {});
```

### 3. –ú–æ–∫–∏ –∏ —Å—Ç–∞–±—ã

```typescript
// –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–∫–æ–≤
const mockSupabase = {
  from: jest.fn().mockReturnValue({
    select: jest.fn().mockResolvedValue({ data: [] }),
  }),
};

// –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–∫–æ–≤ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
afterEach(() => {
  jest.clearAllMocks();
});
```

---

## üîç –û—Ç–ª–∞–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤

### Jest —Ç–µ—Å—Ç—ã

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
npm test -- --verbose

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ failed —Ç–µ—Å—Ç—ã
npm test -- --onlyFailures

# –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ
npm test -- --coverage --coverageReporters=text
```

### Playwright —Ç–µ—Å—Ç—ã

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å headed –±—Ä–∞—É–∑–µ—Ä–æ–º
npx playwright test --headed

# –í–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
npx playwright test --debug

# –ó–∞–ø–∏—Å–∞—Ç—å trace
npx playwright test --trace on
```

---

## üìä CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### GitHub Actions –ø—Ä–∏–º–µ—Ä

```yaml
name: Tests
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3

      - name: Install dependencies
        run: npm ci

      - name: Run unit tests
        run: npm test

      - name: Run E2E tests
        run: npx playwright test

      - name: Upload coverage
        uses: codecov/codecov-action@v3
```

---

## üéØ –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —Ü–µ–ª–∏ (1-2 –Ω–µ–¥–µ–ª–∏):
- [ ] –î–æ–±–∞–≤–∏—Ç—å E2E —Ç–µ—Å—Ç—ã –¥–ª—è Teams
- [ ] –î–æ–±–∞–≤–∏—Ç—å E2E —Ç–µ—Å—Ç—ã –¥–ª—è Users
- [ ] –î–æ–±–∞–≤–∏—Ç—å Integration —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö API routes
- [ ] –£–≤–µ–ª–∏—á–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ Server Actions

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ —Ü–µ–ª–∏ (1 –º–µ—Å—è—Ü):
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ CI/CD
- [ ] –î–æ—Å—Ç–∏—á—å 80% –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å performance —Ç–µ—Å—Ç—ã

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ü–µ–ª–∏ (3 –º–µ—Å—è—Ü–∞):
- [ ] 100% –ø–æ–∫—Ä—ã—Ç–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—É—Ç–µ–π
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- [ ] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Jest Documentation](https://jestjs.io/docs/getting-started)
- [React Testing Library](https://testing-library.com/docs/react-testing-library/intro/)
- [Playwright Documentation](https://playwright.dev/docs/intro)
- [Next.js Testing Guide](https://nextjs.org/docs/testing)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-05
**–ê–≤—Ç–æ—Ä:** Fleet Manager Team
