# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ Organization ID

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞: **"Organization ID not found"**

## –ü—Ä–∏—á–∏–Ω–∞
–ü–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞ organization_id –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª—Å—è –≤ user_metadata, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–µ–π.

---

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å –ª–æ–≥–∏–Ω–∞ (`app/login/actions.ts`)
```typescript
// –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ:
- –ü–æ–ª—É—á–∞–µ–º organization_id –∏–∑ —Ç–∞–±–ª–∏—Ü—ã users
- –°–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ –≤ user_metadata
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ organization_id
```

### 2. –°–æ–∑–¥–∞–Ω–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è organization_id

**–°–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è:** `lib/getOrganizationId.ts`
**–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–µ—Ä—Å–∏—è:** `lib/getOrganizationIdClient.ts`

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
1. –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç user_metadata
2. –ï—Å–ª–∏ –Ω–µ—Ç - –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∏–∑ —Ç–∞–±–ª–∏—Ü—ã users
3. –û–±–Ω–æ–≤–ª—è–µ—Ç metadata –¥–ª—è –±—É–¥—É—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π (`app/dashboard/vehicles/VehicleForm.tsx`)
```typescript
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è:
const orgId = await getOrganizationIdClient();

// –° –¥–µ—Ç–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
if (!orgId) {
  throw new Error('Organization ID not found...');
}
```

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–ª—è —Ç–µ–∫—É—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. **–í—ã–π–¥–∏—Ç–µ –∏–∑ —Å–∏—Å—Ç–µ–º—ã** (–∫–Ω–æ–ø–∫–∞ "–í—ã–π—Ç–∏")
2. **–í–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ** —Å –≤–∞—à–∏–º–∏ —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
3. organization_id –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è

### –î–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

- –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- organization_id —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ª–æ–≥–∏–Ω–µ

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–ª–æ–≥–∏–Ω–∞ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:

```javascript
// –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
supabase.auth.getUser().then(({ data }) => {
  console.log('User metadata:', data.user?.user_metadata);
  console.log('Organization ID:', data.user?.user_metadata?.organization_id);
});
```

–î–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è –≤–∞—à organization_id.

---

## üìä –ö—É–¥–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π:
- ‚úÖ VehicleForm - —Å–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- ‚úÖ Login action - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ metadata

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫:
- –§–æ—Ä–º–∞–º —Å–æ–∑–¥–∞–Ω–∏—è —à—Ç—Ä–∞—Ñ–æ–≤
- –§–æ—Ä–º–∞–º —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
- –§–æ—Ä–º–∞–º —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤
- –í—Å–µ–º —Ñ–æ—Ä–º–∞–º, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–º organization_id

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –¢–∞–±–ª–∏—Ü—ã
- `auth.users` - —Ç–∞–±–ª–∏—Ü–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Supabase
- `public.users` - —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å organization_id

### –ü–æ–ª—è
- `user_metadata.organization_id` - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- `users.organization_id` - –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö

### RLS (Row Level Security)
–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ organization_id –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏.

---

## ‚ùì FAQ

**Q: –ù—É–∂–Ω–æ –ª–∏ —á—Ç–æ-—Ç–æ –¥–µ–ª–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏?**
A: –î–∞, –∏–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –æ–¥–∏–Ω —Ä–∞–∑.

**Q: –ë—É–¥–µ—Ç –ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π?**
A: –î–∞, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –ø–µ—Ä–≤–æ–≥–æ –ª–æ–≥–∏–Ω–∞.

**Q: –ß—Ç–æ –µ—Å–ª–∏ organization_id –≤—Å–µ —Ä–∞–≤–Ω–æ –Ω–µ –Ω–∞–π–¥–µ–Ω?**
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ —Ç–∞–±–ª–∏—Ü–µ `users` —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –∑–∞–ø–∏—Å—å —Å organization_id.

**Q: –ù—É–∂–Ω–æ –ª–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫ –¥—Ä—É–≥–∏–º —Ñ–æ—Ä–º–∞–º?**
A: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –Ω–æ —Ç–µ–∫—É—â–∏–µ —Ñ–æ—Ä–º—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ –∏ –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Ç—É –∂–µ –ø—Ä–æ–±–ª–µ–º—É.

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-05
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
